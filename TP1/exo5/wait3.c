#include <sys/types.h>
#include <unistd.h>
#include <stdio.h>
#include <stdlib.h>
#include <sys/wait.h>

int main(int argc, char* argv[]) {
    int i = 0;
    int d = 0;
   pid_t pidfils;
    while (i < 3) {
        for (int j = 0; j < d; j++)
        printf("    ");
    printf("Processus i=%d, PID=%d, PPID=%d\n", i, getpid(), getppid());
       i++;
        if ((pidfils=fork()) == -1) {
            perror("Erreur lors du fork");
            exit(1);
        }
      //  if(pidfils > 0) sleep(1);

        if (i < 3)
            d++;
    }

     for (int j = 0; j < d; j++)
        printf("    ");
    printf("Processus i=%d, PID=%d, PPID=%d\n", i, getpid(), getppid());
    while(wait(NULL) >= 0);
    return EXIT_SUCCESS;
}










/*#include <sys/types.h>
#include <unistd.h>
#include <stdio.h>
#include <stdlib.h>
int main (int argc, char* argv []) {
int i =0 ;
while (i <3) {
printf ("%d ", i+1);
i ++;
if (fork () == -1)
exit (1);
}
printf("pid est %d et ppid est %d",getpid(),getppid());
printf( "\n ");
// Attendre la fin des fils
//while (wait(NULL) >= 0);
return EXIT_SUCCESS;
}
*/
