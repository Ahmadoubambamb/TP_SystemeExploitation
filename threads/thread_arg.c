#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <pthread.h>
#include <sys/wait.h>

pthread_t tid[3];
char *num[3] = {"Premier","Deuxieme","Trosieme"};
// la duree de vie d'un thread est limite a celle du processus

void *fthread(void *args){
    int i = 0;
   printf("suis le %s thread d'identifiant %u\n",(char*)args,(int)pthread_self());
   for(i= 0;i<1000000000;i++);
   printf("%s: suis apres la Premier boucle\n",(char*)args);
    for(i= 0;i<1000000000;i++);
   printf("%s: suis apres la Deuxieme boucle\n",(char*)args);
    pthread_exit(NULL);
}

int main(){
    int rep , ind;
    printf("processus %d lance:\n",getpid());
    for(ind = 0;ind < 3 ;ind++){
        if((rep = pthread_create(tid + ind ,NULL ,fthread ,num[ind])) == 0)
            printf("thread %d cree\n",ind+1);

    else{
        fprintf(stderr,"%d",ind);
        perror("pthread_create");
    }}
    // sleep(20);
    for(ind = 0;ind < 3 ;ind++)
        pthread_join(tid[ind],NULL);
    printf("FIN");
    return 0;
}
