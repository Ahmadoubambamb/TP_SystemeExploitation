#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>
#include <sys/types.h>
#include <unistd.h>
#include <time.h>
#include <string.h>
int **matrixA;
int **matrixB;
int **matrixS;
void * th1(void*agrs){
   int *tab = (int *)agrs;
      int i = tab[0] , j =tab[1];
    matrixS[i][j] = matrixA[i][j] + matrixB[i][j];
}

void * th2(void*agrs){
      int *tab = (int *)agrs;
      int i = tab[0] , j =tab[1];
    matrixS[i][j] = matrixA[i][j] + matrixB[i][j];
}

void * th3(void*agrs){
    int *tab = (int *)agrs;
      int i = tab[0] , j =tab[1];
    matrixS[i][j] = matrixA[i][j] + matrixB[i][j];
}

void * th4(void*agrs){
     int *tab = (int *)agrs;
      int i = tab[0] , j =tab[1];
    matrixS[i][j] = matrixA[i][j] + matrixB[i][j];
}

void * th5(void*agrs){
      int *tab = (int *)agrs;
      int i = tab[0] , j =tab[1];
    matrixS[i][j] = matrixA[i][j] + matrixB[i][j];
}

void * th6(void*agrs){
    int *tab = (int *)agrs;
      int i = tab[0] , j =tab[1];
    matrixS[i][j] = matrixA[i][j] + matrixB[i][j];
}

void * th7(void*agrs){
     int *tab = (int *)agrs;
      int i = tab[0] , j =tab[1];
    matrixS[i][j] = matrixA[i][j] + matrixB[i][j];
}

void * th8(void*agrs){
      int *tab = (int *)agrs;
      int i = tab[0] , j =tab[1];
    matrixS[i][j] = matrixA[i][j] + matrixB[i][j];
}

void * th9(void*agrs){
     int *tab = (int *)agrs;
      int i = tab[0] , j =tab[1];
    matrixS[i][j] = matrixA[i][j] + matrixB[i][j];
}


int main(){
   pthread_t tid[9];
    int tabi[2];
srand(time(NULL));
   void *(*f[])(void*) = {th1,th2,th3,th4,th5,th6,th7,th8,th9};

    matrixA = (int **)malloc(3*sizeof(int*));
    for(int i = 0;i<3;i++)
     matrixA[i] = (int*)malloc(3*sizeof(int));

    matrixB = (int **)malloc(3*sizeof(int*));
    for(int i = 0;i<3;i++)
     matrixB[i] = (int*)malloc(3*sizeof(int));

    matrixS = (int **)malloc(3*sizeof(int*));
    for(int i = 0;i<3;i++)
     matrixS[i] = (int*)calloc(3,sizeof(int));

    for(int i = 0;i<3;i++)
       for(int j=0;j<3;j++)
           matrixA[i][j] = rand()%10;

    for(int i = 0;i<3;i++)
       for(int j=0;j<3;j++)
           matrixB[i][j] = rand()%20;

   int i , j;
   for(i = 0;i<3;i++)
       for(j=0;j<3;j++)
       { tabi[0] = i; tabi[1]= j;
           if(pthread_create(&tid[i*3 + j], NULL,f[i*3+j],tabi) != 0){
               perror("Erreur de creation de thread");
               return EXIT_FAILURE;
        }
        else
            printf("thread_%d cree\n",i*3+j);
    }
  for(int i = 0;i<3;i++)
       for(int j=0;j<3;j++)
           pthread_join(tid[i*3+j],NULL);

    for(int i=0 ;i<3;i++)
       { for(int j = 0;j<3;j++)
            printf("%3d",matrixS[i][j]);
       printf("\n");
    }

    return EXIT_SUCCESS;
}
