#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/types.h>
#include <fcntl.h>
#include <sys/wait.h>
#include <string.h>
#include <errno.h>
#include <math.h>
#include <ctype.h>
int main()
{ int tube[2] , lettre = 0 , chfr = 0;
    pid_t pidfils ;
     char k;

    if(pipe(tube) != 0){
        fprintf(stderr,"Erreut de pipe");
        exit(1);
    }
    pidfils = fork();
    switch(pidfils){
        case -1:
            perror("Erreur dans fork \n");
            exit(1);
            break;
        case 0 :
           close(tube[1]);
            while(read(tube[1] , &k ,sizeof(char)) > 0)
            { if(isdigit(k)) chfr++;
                else
                    lettre++;
            }
        printf("le fils %d a lu %d lettre | %d chiffre\n",getpid(),lettre,chfr);
        break;
        default:
            close(tube[0]);

            while(read(0, &k ,sizeof(char)) > 0)
                if(isalnum(k))
                    write(tube[1] ,&k ,sizeof(char));
        close(tube[1]);
        wait(NULL);
        puts("Le pere du fils viens de terminer");
       break;
    }
 return 0;
}
